<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive VPS Market Analysis 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: The SPA is structured as a top-down narrative dashboard. It starts with immediate, actionable recommendations ("At-a-Glance"), allowing users to get quick answers. It then flows into an interactive provider comparison tool, which is the core of the app, letting users filter by persona and view detailed provider cards. This is followed by two dedicated "Deep Dive" sections with interactive charts for "True Cost" and "Performance," appealing to users who need to analyze specific data points. Finally, a "Key Concepts" section uses accordions to provide educational context without cluttering the main UI. This structure was chosen to cater to multiple user journeys: the user who wants a quick recommendation, the user who wants to perform a detailed comparison, and the user who wants to understand the market's underlying principles. Navigation is facilitated by a sticky header, allowing easy jumps between these logical sections. -->
    <!-- Visualization & Content Choices: 
        - Report Info: "Top Recommendations" table -> Goal: Inform -> Viz/Method: Static HTML Table -> Interaction: None -> Justification: Provides immediate, scannable answers for users in a hurry.
        - Report Info: All provider data (specs, pricing, reputation) -> Goal: Compare/Organize -> Viz/Method: Interactive Provider Cards (HTML/Tailwind) -> Interaction: Persona-based filtering (JS), Click-to-reveal details modal -> Justification: Translates the report's disparate provider sections into a single, filterable, and explorable interface. Centralizes all info.
        - Report Info: "True Cost of a VPS" table -> Goal: Compare/Relationships -> Viz/Method: Interactive Bar Chart (Chart.js) -> Interaction: Checkboxes to toggle providers on/off -> Justification: Visually dramatizes the significant price gap between provider tiers, which is a key finding of the report. More impactful than a static table.
        - Report Info: Performance Benchmark tables -> Goal: Compare -> Viz/Method: Grouped Bar Charts (Chart.js) -> Interaction: Checkboxes to select providers for comparison -> Justification: Allows users to create their own head-to-head performance comparisons, making the benchmark data more personal and useful.
        - Report Info: Explanations (Price Trap, Hetzner Gauntlet) -> Goal: Inform/Organize -> Viz/Method: Accordion (HTML/Tailwind) & Simple Diagram (HTML/CSS) -> Interaction: Click-to-toggle visibility -> Justification: Hides complex explanations by default to maintain a clean UI, making them available for users who need the context. The simple diagram for the "Hetzner Gauntlet" visualizes a process more effectively than text alone.
        - Library/Method: Chart.js for all charts due to its simplicity, responsiveness, and canvas-based rendering.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fdfcfb;
            color: #3d3d3d;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 50vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 450px;
            }
        }
        .nav-link {
            transition: color 0.3s ease, border-color 0.3s ease;
        }
        .nav-link.active {
            color: #c084fc;
            border-bottom-color: #c084fc;
        }
        .nav-link:not(.active):hover {
            color: #a855f7;
        }
        .provider-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .provider-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .modal-backdrop {
            transition: opacity 0.3s ease;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        .btn-primary {
            background-color: #9333ea;
            color: white;
        }
        .btn-primary:hover {
            background-color: #7e22ce;
        }
        .btn-secondary {
            background-color: #e5e7eb;
            color: #374151;
        }
        .btn-secondary:hover {
            background-color: #d1d5db;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-40 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <span class="font-bold text-xl text-purple-600">VPS<span class="text-gray-600">Nav</span></span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#recommendations" class="nav-link px-3 py-2 text-sm font-medium text-gray-500 border-b-2 border-transparent">Recommendations</a>
                        <a href="#comparator" class="nav-link px-3 py-2 text-sm font-medium text-gray-500 border-b-2 border-transparent">Comparator</a>
                        <a href="#cost-analysis" class="nav-link px-3 py-2 text-sm font-medium text-gray-500 border-b-2 border-transparent">Cost Analysis</a>
                        <a href="#performance" class="nav-link px-3 py-2 text-sm font-medium text-gray-500 border-b-2 border-transparent">Performance</a>
                        <a href="#concepts" class="nav-link px-3 py-2 text-sm font-medium text-gray-500 border-b-2 border-transparent">Key Concepts</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
        <!-- Hero Section -->
        <section class="text-center mb-16">
            <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight text-gray-800">The 2025 VPS Market, <span class="text-purple-600">Demystified</span>.</h1>
            <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-600">An interactive guide to the most reputable and cost-effective VPS options for 2025, based on comprehensive market analysis and Reddit community intelligence.</p>
        </section>

        <!-- Recommendations Section -->
        <section id="recommendations" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-2 text-gray-800">Top Recommendations At-a-Glance</h2>
            <p class="text-center text-gray-600 mb-8 max-w-2xl mx-auto">This section provides immediate, actionable guidance. Find the persona that best fits you to see our top provider picks before diving into the detailed comparisons below.</p>
            <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200">
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left text-gray-600">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3">Use Case / Persona</th>
                                <th scope="col" class="px-6 py-3">Top Recommendation</th>
                                <th scope="col" class="px-6 py-3">Runner-Up</th>
                                <th scope="col" class="px-6 py-3">Key Justification & Caveats</th>
                            </tr>
                        </thead>
                        <tbody id="recommendations-table-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Comparator Section -->
        <section id="comparator" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-2 text-gray-800">Interactive Provider Comparator</h2>
            <p class="text-center text-gray-600 mb-8 max-w-2xl mx-auto">This tool lets you compare VPS providers side-by-side. Select a user profile to see our top picks, or click any provider for a deep dive into their pricing, performance, and community reputation.</p>
            <div class="flex justify-center mb-8">
                <div id="persona-filter" class="flex flex-wrap justify-center space-x-2 rounded-lg bg-gray-200 p-1">
                </div>
            </div>
            <div id="provider-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            </div>
        </section>

        <!-- Cost Analysis Section -->
        <section id="cost-analysis" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-2 text-gray-800">Deep Dive: The True Cost of a VPS</h2>
            <p class="text-center text-gray-600 mb-8 max-w-2xl mx-auto">The advertised price is only part of the story. This chart visualizes the Total Cost of Ownership (TCO) for a standard mid-range server (approx. 2 vCPU / 4GB RAM), including the often-hidden cost of automated backups. Use the checkboxes to compare providers directly.</p>
            <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200">
                <div class="chart-container">
                    <canvas id="cost-chart"></canvas>
                </div>
                <div id="cost-chart-controls" class="mt-6 flex flex-wrap justify-center gap-x-4 gap-y-2"></div>
            </div>
        </section>
        
        <!-- Performance Section -->
        <section id="performance" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-2 text-gray-800">Deep Dive: Performance Benchmarks</h2>
            <p class="text-center text-gray-600 mb-8 max-w-2xl mx-auto">Beyond price, raw performance is critical. These charts synthesize data from independent benchmarks. Select providers to see how they stack up in CPU power, disk speed, and network stability.</p>
             <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200">
                <h3 class="text-xl font-bold text-center mb-4 text-gray-700">CPU & Disk I/O Performance</h3>
                <div class="chart-container">
                    <canvas id="performance-chart"></canvas>
                </div>
                <div id="performance-chart-controls" class="mt-6 flex flex-wrap justify-center gap-x-4 gap-y-2"></div>
            </div>
        </section>

        <!-- Key Concepts Section -->
        <section id="concepts" class="scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-2 text-gray-800">Understanding the Market: Key Concepts</h2>
            <p class="text-center text-gray-600 mb-8 max-w-2xl mx-auto">To make a truly informed decision, it helps to understand the market's nuances. This section explains key concepts from the report that influence provider reputation and value.</p>
            <div id="accordion-container" class="space-y-4 max-w-4xl mx-auto">
            </div>
        </section>

    </main>
    
    <!-- Footer -->
    <footer class="bg-gray-100 border-t border-gray-200 mt-16">
        <div class="container mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-gray-500 text-sm">
            <p>Interactive report generated from "The 2025 VPS Market Analysis".</p>
            <p>All data is based on the source report and is for illustrative purposes.</p>
        </div>
    </footer>

    <!-- Modal -->
    <div id="provider-modal" class="modal-backdrop fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 opacity-0 pointer-events-none">
        <div id="modal-content" class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto transform scale-95 transition-transform duration-300">
            <!-- Content will be injected by JS -->
        </div>
    </div>


<script>
document.addEventListener('DOMContentLoaded', () => {

    const appData = {
        personas: [
            { id: 'all', name: 'All Providers' },
            { id: 'hobbyist', name: 'Budget Hobbyist' },
            { id: 'developer', name: 'Pro Developer' },
            { id: 'performance', name: 'Performance-Focused' },
        ],
        recommendations: [
            { persona: 'Budget-Conscious Hobbyist', top: 'RackNerd', runnerUp: 'IONOS', justification: 'Unbeatable annual deals for learning and tinkering. Must use off-site backups; performance can be inconsistent. Treat as ephemeral.' },
            { persona: 'Professional Developer (Balanced)', top: 'DigitalOcean', runnerUp: 'Linode (Akamai)', justification: 'Best-in-class UI, documentation, and API for productivity. Higher cost-per-resource compared to value providers.' },
            { persona: 'Performance-Focused Business (EU)', top: 'Hetzner', runnerUp: 'Netcup', justification: 'Unmatched price-to-performance ratio with excellent reliability post-verification. Must navigate the strict signup process and direct support style.' },
            { persona: 'Global Performance & Scalability', top: 'Vultr', runnerUp: 'DigitalOcean', justification: 'Widest global footprint and high-frequency compute options. Documented network stability issues require active monitoring.' },
            { persona: 'Legacy Reliability & Support', top: 'Linode (Akamai)', runnerUp: 'DigitalOcean', justification: 'Long-standing reputation for solid support and simple pricing. Post-acquisition price hikes and future direction are a community concern.' },
        ],
        providers: [
            { 
                id: 'hetzner',
                name: 'Hetzner', 
                logoColor: 'text-red-500',
                personas: ['performance'],
                tier: 'Value Champion',
                summary: 'The uncontested price-to-performance king, offering powerful AMD EPYC servers with generous NVMe storage and bandwidth for an exceptionally low price. Ideal for technically proficient users who can navigate their strict administrative processes.',
                pros: ['Unmatched price-to-performance', 'High-quality AMD EPYC hardware', 'Generous 20TB bandwidth included', 'Proven reliability post-verification'],
                cons: ['Extremely strict and difficult identity verification', 'Risk of abrupt account termination for ToS violations', 'Direct, no-frills support culture'],
                cost: { base: 6.10, backup: 1.22, total: 7.32 },
                specs: { vcpu: '2', ram: '4', storage: '40 NVMe' },
                performance: { cpu: 8, disk: 7, network: 8 },
            },
            {
                id: 'netcup',
                name: 'Netcup',
                logoColor: 'text-blue-500',
                personas: ['performance'],
                tier: 'Value Champion',
                summary: 'A high-performance German alternative to Hetzner, offering excellent value and dedicated core options ("Root Servers"). Praised for raw performance, but known for slow support and a less polished control panel.',
                pros: ['"Insane performance for the price"', 'Dedicated CPU core options available', 'Highly competitive promotional deals'],
                cons: ['Support response times are notoriously slow', 'Custom control panel is considered "clunky"', 'Rigid billing and cancellation policies reported'],
                cost: { base: 4.32, backup: 0, total: 4.32 },
                specs: { vcpu: '4', ram: '4', storage: '128 SSD' },
                performance: { cpu: 9, disk: 8, network: 7 },
            },
            {
                id: 'racknerd',
                name: 'RackNerd',
                logoColor: 'text-green-500',
                personas: ['hobbyist'],
                tier: 'Ultra-Budget',
                summary: 'Master of the perpetual deal, offering incredible on-paper specs for extremely low annual prices. A high-reward, high-risk option best suited for non-critical projects where performance inconsistency is acceptable.',
                pros: ['Unbeatably low annual promotional prices', 'Surprisingly fast and responsive support for simple requests', 'Good for learning, VPNs, and personal projects'],
                cons: ['No included backup solution on promo deals', 'Inconsistent performance and "CPU steal" are common', 'Reports of catastrophic account termination without warning'],
                cost: { base: 1.47, backup: 0, total: 1.47 },
                specs: { vcpu: '2', ram: '2', storage: '30 SSD' },
                performance: { cpu: 4, disk: 3, network: 5 },
            },
            {
                id: 'digitalocean',
                name: 'DigitalOcean',
                logoColor: 'text-cyan-500',
                personas: ['developer'],
                tier: 'Developer-Focused',
                summary: 'The polished veteran, renowned for its best-in-class developer experience, intuitive UI, and comprehensive documentation. A premium is paid for its rich ecosystem of integrated services like managed databases and object storage.',
                pros: ['Exceptionally easy-to-use interface and API', 'Excellent documentation and tutorials', 'Rich ecosystem of integrated products (Spaces, Databases)', 'Fast deployment of "Droplets"'],
                cons: ['High cost per resource compared to value providers', 'Support can be scripted and unhelpful for complex issues', 'Reports of hypervisor-level freezes', 'Account locks on signup are a common frustration'],
                cost: { base: 24.00, backup: 4.80, total: 28.80 },
                specs: { vcpu: '2', ram: '4', storage: '80 SSD' },
                performance: { cpu: 6, disk: 6, network: 8 },
            },
            {
                id: 'vultr',
                name: 'Vultr',
                logoColor: 'text-sky-600',
                personas: ['developer', 'performance'],
                tier: 'Developer-Focused',
                summary: 'The global performance contender with a massive footprint of over 32 data centers. Its High-Frequency and High-Performance plans offer excellent raw compute power, but it suffers from a reputation for network instability.',
                pros: ['Expansive global presence for low latency', 'Excellent CPU performance on high-end plans', 'Competitive pricing against DigitalOcean'],
                cons: ['Persistent, widely-reported network instability', 'Frequent packet loss and "hiccup" issues', '"Noisy neighbor" problems are common', 'Support often resolves issues by migrating the VPS'],
                cost: { base: 24.00, backup: 4.80, total: 28.80 },
                specs: { vcpu: '2', ram: '4', storage: '100 NVMe' },
                performance: { cpu: 9, disk: 9, network: 6 },
            },
            {
                id: 'linode',
                name: 'Linode',
                logoColor: 'text-emerald-600',
                personas: ['developer'],
                tier: 'Developer-Focused',
                summary: 'The legacy provider in transition after its acquisition by Akamai. Historically praised for reliability and best-in-class support, but now facing community concern over price hikes and a perceived decline in service quality.',
                pros: ['Long-standing reputation for reliability', 'Historically excellent, human-centric support', 'Simple, transparent pricing model'],
                cons: ['Acquired by Akamai, future is uncertain', 'Significant price increases post-acquisition', 'Reports of increased hardware failures and downtime', 'Performance has been surpassed by competitors'],
                cost: { base: 24.00, backup: 5.00, total: 29.00 },
                specs: { vcpu: '2', ram: '4', storage: '80 SSD' },
                performance: { cpu: 5, disk: 6, network: 7 },
            },
            {
                id: 'ionos',
                name: 'IONOS',
                logoColor: 'text-teal-500',
                personas: ['hobbyist'],
                tier: 'Ultra-Budget',
                summary: 'Formerly 1&1, IONOS offers one of the cheapest entry points into VPS hosting from a major brand. It provides a reasonable balance for beginners but is less popular in technical communities.',
                pros: ['Extremely low entry-level price ($2/mo)', 'Generous storage on higher plans', 'Included backups are a strong value proposition'],
                cons: ['Customer support is a "mixed bag"', 'Not considered a serious developer tool by many', 'Can have high renewal rates after introductory period'],
                cost: { base: 6.00, backup: 0, total: 6.00 },
                specs: { vcpu: '2', ram: '4', storage: '160 SSD' },
                performance: { cpu: 5, disk: 5, network: 6 },
            },
        ],
        keyConcepts: [
            {
                title: "Reputation: Signal vs. Noise",
                content: "Any large provider will have negative reviews. The key is to differentiate between 'noise' (isolated incidents, user error) and 'signal' (recurring, systemic problems). This report categorizes complaints into two types: <br/><br/><strong>1. Business Process Complaints:</strong> Predictable administrative hurdles, like Hetzner's strict ID verification. Frustrating, but manageable. This is a barrier to entry, not a flaw in the core service.<br/><br/><strong>2. Core Service Failures:</strong> Unpredictable technical failures, like Vultr's network instability or DigitalOcean's server freezes. These pose a much higher risk to production workloads as they cannot be easily mitigated by the user."
            },
            {
                title: "The 'Hetzner Gauntlet': A Feature, Not a Bug",
                content: "Hetzner's market-disrupting prices attract many users intending to abuse the service (spamming, etc.), which can harm the network for everyone. Instead of raising prices, Hetzner implements a strict administrative filter—the 'Gauntlet'—to weed out high-risk users. This creates many complaints from rejected applicants but protects the infrastructure for accepted customers, who then report excellent, stable performance. The challenge is administrative, not technical.",
                diagram: [
                    { label: 'New User Signs Up', icon: '👤' },
                    { label: 'Strict ID Verification', icon: '🛂' },
                    { label: 'High-Risk User Rejected', icon: '🚫', path: 'fail' },
                    { label: 'Trusted User Approved', icon: '✅', path: 'success' },
                    { label: 'Abuse Prevented, Network Stable', icon: '🛡️', path: 'fail' },
                    { label: 'Excellent Performance & Value', icon: '🚀', path: 'success' },
                ]
            },
            {
                title: "The Introductory Price Trap",
                content: "A common tactic, especially from hosts with a background in shared hosting, is offering a very low introductory price that can increase by 2x-4x upon renewal. A $3/mo plan can easily become $12/mo after the first year. The developer-focused providers in this report (DigitalOcean, Vultr, Linode, Hetzner) generally use more transparent, consistent pricing, avoiding this 'renewal shock'."
            },
            {
                title: "The 'Big Three' Ecosystem Value",
                content: "On a raw specs-to-price comparison, DigitalOcean, Vultr, and Linode often look 'overpriced' compared to Hetzner. Their value proposition isn't just the server; it's the comprehensive platform. This includes polished UIs, rich APIs, and seamlessly integrated services like managed databases, object storage, and load balancers. This ecosystem accelerates development and reduces management overhead, a value that can justify the price premium for many professional users."
            }
        ]
    };
    
    let costChartInstance = null;
    let performanceChartInstance = null;

    function init() {
        populateRecommendations();
        populatePersonaFilters();
        renderProviderCards('all');
        initCostChart();
        initPerformanceChart();
        populateAccordions();
        setupNavScroll();
    }

    function populateRecommendations() {
        const tableBody = document.getElementById('recommendations-table-body');
        let html = '';
        appData.recommendations.forEach((rec, index) => {
            html += `
                <tr class="${index % 2 === 0 ? 'bg-white' : 'bg-gray-50'} border-b">
                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">${rec.persona}</td>
                    <td class="px-6 py-4"><span class="font-semibold ${appData.providers.find(p => p.name === rec.top)?.logoColor || ''}">${rec.top}</span></td>
                    <td class="px-6 py-4">${rec.runnerUp}</td>
                    <td class="px-6 py-4">${rec.justification}</td>
                </tr>
            `;
        });
        tableBody.innerHTML = html;
    }

    function populatePersonaFilters() {
        const filterContainer = document.getElementById('persona-filter');
        let html = '';
        appData.personas.forEach(persona => {
            const isActive = persona.id === 'all';
            html += `
                <button data-persona="${persona.id}" class="persona-btn px-4 py-2 text-sm font-semibold rounded-md transition-colors duration-200 ${isActive ? 'bg-purple-600 text-white' : 'bg-transparent text-gray-600 hover:bg-purple-100'}">
                    ${persona.name}
                </button>
            `;
        });
        filterContainer.innerHTML = html;
        filterContainer.addEventListener('click', e => {
            if (e.target.classList.contains('persona-btn')) {
                const personaId = e.target.dataset.persona;
                document.querySelectorAll('.persona-btn').forEach(btn => {
                    btn.classList.remove('bg-purple-600', 'text-white');
                    btn.classList.add('bg-transparent', 'text-gray-600', 'hover:bg-purple-100');
                });
                e.target.classList.add('bg-purple-600', 'text-white');
                e.target.classList.remove('bg-transparent', 'text-gray-600', 'hover:bg-purple-100');
                renderProviderCards(personaId);
            }
        });
    }

    function renderProviderCards(personaId) {
        const grid = document.getElementById('provider-grid');
        let filteredProviders = appData.providers;
        if (personaId !== 'all') {
            filteredProviders = appData.providers.filter(p => p.personas.includes(personaId));
        }

        let html = '';
        filteredProviders.forEach(p => {
            html += `
                <div class="provider-card bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden cursor-pointer" data-provider-id="${p.id}">
                    <div class="p-6">
                        <div class="flex justify-between items-start">
                            <h3 class="text-2xl font-bold ${p.logoColor}">${p.name}</h3>
                            <span class="text-xs font-semibold uppercase tracking-wider text-white ${p.tier === 'Value Champion' ? 'bg-green-500' : (p.tier === 'Developer-Focused' ? 'bg-blue-500' : 'bg-yellow-500')} px-2 py-1 rounded-full">${p.tier}</span>
                        </div>
                        <p class="mt-2 text-gray-600 h-20">${p.summary}</p>
                        <div class="mt-4 pt-4 border-t border-gray-200 grid grid-cols-3 gap-4 text-center">
                            <div>
                                <p class="text-xs text-gray-500">vCPU</p>
                                <p class="font-bold text-lg">${p.specs.vcpu}</p>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500">RAM (GB)</p>
                                <p class="font-bold text-lg">${p.specs.ram}</p>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500">Storage (GB)</p>
                                <p class="font-bold text-lg">${p.specs.storage}</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        });
        grid.innerHTML = html;
        document.querySelectorAll('.provider-card').forEach(card => {
            card.addEventListener('click', () => openModal(card.dataset.providerId));
        });
    }
    
    function openModal(providerId) {
        const provider = appData.providers.find(p => p.id === providerId);
        if (!provider) return;

        const modal = document.getElementById('provider-modal');
        const modalContent = document.getElementById('modal-content');
        
        modalContent.innerHTML = `
            <div class="p-6 md:p-8">
                <div class="flex justify-between items-center">
                    <h2 class="text-3xl font-bold ${provider.logoColor}">${provider.name}</h2>
                    <button id="close-modal-btn" class="text-gray-400 hover:text-gray-600 transition">&times;</button>
                </div>
                <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h4 class="font-bold text-lg mb-2 text-gray-800">Pros</h4>
                        <ul class="space-y-2">
                            ${provider.pros.map(pro => `<li class="flex items-start"><span class="text-green-500 mr-2 mt-1">✓</span><span class="text-gray-700">${pro}</span></li>`).join('')}
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold text-lg mb-2 text-gray-800">Cons</h4>
                        <ul class="space-y-2">
                            ${provider.cons.map(con => `<li class="flex items-start"><span class="text-red-500 mr-2 mt-1">✗</span><span class="text-gray-700">${con}</span></li>`).join('')}
                        </ul>
                    </div>
                </div>
                 <div class="mt-8 pt-6 border-t">
                    <h4 class="font-bold text-lg mb-4 text-gray-800 text-center">Relative Performance Score (1-10)</h4>
                    <div class="grid grid-cols-3 gap-4 text-center">
                       <div><p class="text-sm text-gray-500">CPU Power</p><p class="font-bold text-2xl text-purple-600">${provider.performance.cpu}</p></div>
                       <div><p class="text-sm text-gray-500">Disk I/O</p><p class="font-bold text-2xl text-purple-600">${provider.performance.disk}</p></div>
                       <div><p class="text-sm text-gray-500">Network</p><p class="font-bold text-2xl text-purple-600">${provider.performance.network}</p></div>
                    </div>
                </div>
            </div>
        `;

        modal.classList.remove('opacity-0', 'pointer-events-none');
        modalContent.classList.remove('scale-95');
        document.body.style.overflow = 'hidden';

        document.getElementById('close-modal-btn').addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });
    }

    function closeModal() {
        const modal = document.getElementById('provider-modal');
        const modalContent = document.getElementById('modal-content');
        modal.classList.add('opacity-0', 'pointer-events-none');
        modalContent.classList.add('scale-95');
        document.body.style.overflow = 'auto';
    }


    function setupChartControls(chartId, chartInstance, dataKey) {
        const controlsContainer = document.getElementById(`${chartId}-controls`);
        let html = '';
        appData.providers.forEach(provider => {
            const isChecked = ['hetzner', 'digitalocean', 'racknerd', 'vultr'].includes(provider.id);
            html += `
                <label class="inline-flex items-center">
                    <input type="checkbox" class="form-checkbox h-4 w-4 rounded" data-provider-id="${provider.id}" ${isChecked ? 'checked' : ''}>
                    <span class="ml-2 text-sm text-gray-700">${provider.name}</span>
                </label>
            `;
        });
        controlsContainer.innerHTML = html;

        controlsContainer.addEventListener('change', () => {
            updateChartData(chartInstance, dataKey);
        });
        
        updateChartData(chartInstance, dataKey);
    }
    
    function updateChartData(chartInstance, dataKey) {
        const selectedProviderIds = Array.from(document.querySelectorAll(`#${chartInstance.canvas.id}-controls input:checked`)).map(cb => cb.dataset.providerId);
        const filteredProviders = appData.providers.filter(p => selectedProviderIds.includes(p.id));

        chartInstance.data.labels = filteredProviders.map(p => p.name);
        
        if (dataKey === 'cost') {
            chartInstance.data.datasets[0].data = filteredProviders.map(p => p.cost.base);
            chartInstance.data.datasets[1].data = filteredProviders.map(p => p.cost.backup);
        } else if (dataKey === 'performance') {
            chartInstance.data.datasets[0].data = filteredProviders.map(p => p.performance.cpu);
            chartInstance.data.datasets[1].data = filteredProviders.map(p => p.performance.disk);
        }
        
        chartInstance.update();
    }

    function initCostChart() {
        const ctx = document.getElementById('cost-chart').getContext('2d');
        costChartInstance = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: [],
                datasets: [
                    {
                        label: 'Base Monthly Price ($)',
                        data: [],
                        backgroundColor: 'rgba(168, 85, 247, 0.6)',
                        borderColor: 'rgba(147, 51, 234, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Backup Cost ($)',
                        data: [],
                        backgroundColor: 'rgba(209, 213, 219, 0.6)',
                        borderColor: 'rgba(156, 163, 175, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                maintainAspectRatio: false,
                responsive: true,
                scales: {
                    x: {
                        stacked: true,
                    },
                    y: {
                        stacked: true,
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Estimated True Monthly Cost (USD)'
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        callbacks: {
                            footer: (tooltipItems) => {
                                let total = 0;
                                tooltipItems.forEach(function(tooltipItem) {
                                    total += tooltipItem.parsed.y;
                                });
                                return 'Total: $' + total.toFixed(2);
                            }
                        }
                    }
                }
            }
        });
        setupChartControls('cost-chart', costChartInstance, 'cost');
    }
    
    function initPerformanceChart() {
        const ctx = document.getElementById('performance-chart').getContext('2d');
        performanceChartInstance = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: [],
                datasets: [
                    {
                        label: 'CPU Performance Score',
                        data: [],
                        backgroundColor: 'rgba(59, 130, 246, 0.6)',
                        borderColor: 'rgba(37, 99, 235, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Disk I/O Performance Score',
                        data: [],
                        backgroundColor: 'rgba(16, 185, 129, 0.6)',
                        borderColor: 'rgba(5, 150, 105, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                maintainAspectRatio: false,
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 10,
                        title: {
                            display: true,
                            text: 'Relative Performance Score (out of 10)'
                        }
                    }
                }
            }
        });
        setupChartControls('performance-chart', performanceChartInstance, 'performance');
    }

    function populateAccordions() {
        const container = document.getElementById('accordion-container');
        let html = '';
        appData.keyConcepts.forEach((concept, index) => {
            let diagramHtml = '';
            if (concept.diagram) {
                const successPath = concept.diagram.filter(d => d.path === 'success');
                const failPath = concept.diagram.filter(d => d.path === 'fail');
                diagramHtml = `
                    <div class="mt-4 pt-4 border-t grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <p class="font-semibold text-green-600 mb-2 text-center">✅ Successful Path</p>
                            <div class="space-y-2 relative">
                                ${successPath.map((item, idx) => `
                                    <div class="flex items-center">
                                        <span class="text-2xl w-8 text-center">${item.icon}</span>
                                        <span class="ml-2">${item.label}</span>
                                    </div>
                                    ${idx < successPath.length - 1 ? '<div class="ml-4 h-4 border-l-2 border-dashed border-gray-300"></div>' : ''}
                                `).join('')}
                            </div>
                        </div>
                        <div>
                            <p class="font-semibold text-red-600 mb-2 text-center">🚫 Filtered Path</p>
                            <div class="space-y-2 relative">
                                ${failPath.map((item, idx) => `
                                    <div class="flex items-center">
                                        <span class="text-2xl w-8 text-center">${item.icon}</span>
                                        <span class="ml-2">${item.label}</span>
                                    </div>
                                    ${idx < failPath.length - 1 ? '<div class="ml-4 h-4 border-l-2 border-dashed border-gray-300"></div>' : ''}
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }

            html += `
                <div class="bg-white rounded-lg border border-gray-200 shadow-sm">
                    <h2>
                        <button type="button" class="accordion-toggle flex items-center justify-between w-full p-5 font-medium text-left text-gray-700 hover:bg-gray-50 focus:ring-4 focus:ring-purple-200">
                            <span>${concept.title}</span>
                            <svg class="w-6 h-6 shrink-0 transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                    </h2>
                    <div class="accordion-content p-5 border-t border-gray-200">
                        <div class="text-gray-600">
                           <p>${concept.content}</p>
                           ${diagramHtml}
                        </div>
                    </div>
                </div>
            `;
        });
        container.innerHTML = html;
        document.querySelectorAll('.accordion-toggle').forEach(button => {
            button.addEventListener('click', () => {
                const content = button.parentElement.nextElementSibling;
                const svg = button.querySelector('svg');
                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                    svg.classList.remove('rotate-180');
                } else {
                    document.querySelectorAll('.accordion-content').forEach(c => c.style.maxHeight = null);
                    document.querySelectorAll('.accordion-toggle svg').forEach(s => s.classList.remove('rotate-180'));
                    content.style.maxHeight = content.scrollHeight + "px";
                    svg.classList.add('rotate-180');
                }
            });
        });
    }

    function setupNavScroll() {
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('nav a.nav-link');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href').substring(1) === entry.target.id) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, { rootMargin: '-50% 0px -50% 0px', threshold: 0 });

        sections.forEach(section => observer.observe(section));
        
        navLinks.forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    }
    
    init();
});
</script>

</body>
</html>
